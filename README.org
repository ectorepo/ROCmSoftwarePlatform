#+title:     Ectorepo: AMD ROCm
#+author:    David Conner
#+email:     noreply@te.xel.io
#+PROPERTY: header-args+ :comments none :var enable-restclient=(setq-local restclient-enable-eval "yes")

A list of AMD ROCm repositories. To learn how to use this Repo repo, see the
the [[https://github.com/ectorepo/ectorepo][ectorepo/ectorepo]] Repo ... repo.

#+begin_src xml :tangle default.xml
<manifest>
  <include name="_remotes.xml"/>
  <default remote="github" sync-j="8" revision="refs/heads/master"/>
  <include name="rocm.xml"/>
</manifest>
#+end_src

Check rates:

#+begin_src emacs-lisp :results value code :exports code
(ghub-graphql-rate-limit)
#+end_src

To avoid confirmations

#+begin_src emacs-lisp
(setq-local org-confirm-babel-evaluate nil)
#+end_src

* Babel Setup

Get the core repositories. These should go into =/data/ecto/ROCmSoftwarePlatform/rocm=.

#+name: nrepos
#+begin_src emacs-lisp
100
#+end_src

#+RESULTS: nrepos
: 100

For some reason =:var nrepos=200= doesn't properly substitute here, so =:noweb
yes= is required. However, 100 is the max on sorted results anyways.

* ROCm

Clone bundle sizes

#+name: fetchMetadata
#+headers: :var gh-org="FreeCAD" :jq-args "--raw-output" :eval query :results table
#+begin_src restclient :jq "sort_by(-.size) | map([.owner.login, .name, .size, .default_branch, .archived, .updated_at])[] | @csv"
:gh-graphql-url = https://api.github.com/graphql
:gh-url-base = https://api.github.com
:gh-url-path = orgs/:gh-org/repos
:gh-token := (auth-source-pass-get 'secret "api.github.com/dcunited001^ghub")

:headers = <<
Accept: application/vnd.github+json
Authorization: Bearer :gh-token
X-GitHub-Api-Version: 2022-11-28
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:138.0) Gecko/20100101 Firefox/138.0
# User-Agent: dcunited001 # um okay that doesn't work
# https://docs.github.com/en/rest/using-the-rest-api/getting-started-with-the-rest-api?apiVersion=2022-11-28#user-agent

GET :gh-url-base/:gh-url-path
:headers
#+end_src

#+name: rocmMetadata
#+call: fetchMetadata(gh-org="rocm")

#+RESULTS: rocmMetadata
| ROCm | amdgpu                      | 3711580 | master                 | false | 2026-01-08T16:24:14Z |
| ROCm | llvm                        |  486348 | amd-common             | false | 2024-07-30T12:28:39Z |
| ROCm | hcc-clang-upgrade           |  372519 | clang_tot_upgrade      | false | 2025-11-25T20:22:01Z |
| ROCm | clang                       |  212441 | amd-common             | false | 2024-01-18T07:12:29Z |
| ROCm | rocBLAS                     |  186981 | develop_deprecated     | false | 2025-12-26T23:59:23Z |
| ROCm | ROCm                        |  145794 | develop                | false | 2026-01-08T23:18:42Z |
| ROCm | HIP-Examples                |  132888 | master                 | true  | 2025-12-01T14:00:07Z |
| ROCm | Tensile                     |  103092 | develop_deprecated     | false | 2025-12-31T04:36:24Z |
| ROCm | ROCR-Runtime                |   85381 | amd-staging_deprecated | false | 2025-11-11T01:58:34Z |
| ROCm | compiler-rt                 |   39118 | master                 | false | 2024-01-18T07:18:36Z |
| ROCm | lld                         |   37067 | amd-common             | false | 2024-01-18T12:58:14Z |
| ROCm | hip                         |   27260 | develop                | false | 2026-01-08T09:00:06Z |
| ROCm | hcc                         |   23626 | clang_tot_upgrade      | false | 2025-12-28T03:41:25Z |
| ROCm | clang-tools-extra           |   17610 | master                 | false | 2025-12-01T02:14:46Z |
| ROCm | rocFFT                      |    9449 | develop_deprecated     | false | 2025-10-22T00:10:25Z |
| ROCm | Thrust                      |    8176 | master                 | false | 2025-08-19T17:31:04Z |
| ROCm | ROCT-Thunk-Interface        |    7399 | master                 | false | 2025-11-25T20:22:00Z |
| ROCm | atmi                        |    5013 | master                 | true  | 2025-05-19T17:33:20Z |
| ROCm | ROCm.github.io              |    4378 | master                 | true  | 2025-11-16T19:45:12Z |
| ROCm | MIOpenGEMM                  |    4083 | master                 | true  | 2025-10-16T07:08:58Z |
| ROCm | ROCm-Device-Libs            |    2015 | deprecated             | true  | 2025-08-14T20:18:40Z |
| ROCm | clARMOR                     |    1907 | master                 | true  | 2025-12-22T07:11:46Z |
| ROCm | ROC-smi                     |     329 | master                 | false | 2025-12-23T21:01:40Z |
| ROCm | ROCm-docker                 |     258 | master                 | false | 2025-12-27T20:05:26Z |
| ROCm | ROCm-OpenCL-Driver          |     193 | master                 | false | 2024-05-10T11:11:41Z |
| ROCm | HCC-Example-Application     |      93 | master                 | true  | 2024-01-26T03:16:59Z |
| ROCm | LLVM-AMDGPU-Assembler-Extra |      76 | master                 | true  | 2025-11-11T14:10:32Z |
| ROCm | ROCm-ComputeABI-Doc         |      56 | master                 | true  | 2025-01-01T14:58:53Z |
| ROCm | StatusMonitor               |      32 | master                 | true  | 2025-07-02T05:36:53Z |
| ROCm | DirectGMA_CL                |      15 | master                 | true  | 2025-03-23T01:02:53Z |

#+NAME: rocmReposExclude
| schemastore  |
| transformers |
| .github      |

#+name: rocmRepos
#+begin_src emacs-lisp :var nrepos=100 :results replace vector value :exports code :noweb yes
(ghub-graphql
 (graphql-query ((organization
                  :arguments ((login . "ROCm"))
                  (repositories
                   :arguments ((first . 100)
                               (orderBy . ((field . UPDATED_AT)
                                           (direction . DESC))))
                   (edges
                    (node (owner login)
                          name
                          (defaultBranchRef prefix name)
                          url
                          updatedAt
                          isArchived)))))))
#+end_src

Filter the results, generate XML

#+name: rocmReposXML
#+begin_src emacs-lisp :var gqldata=rocmRepos repos-exclude=rocmReposExclude :results value html
(setq -gql-data gqldata)

;; no repos-core variable
;; (repos-core (flatten-list repos- core))

(let* ((repos-exclude (flatten-list repos-exclude)))
  (thread-first
    (thread-last
      (a-get* (nthcdr 0 gqldata) 'data 'organization 'repositories 'edges)
      (mapcar (lambda (el) (a-get* el 'node)))

      ;; filter archived repos
      (seq-filter (lambda (el) (not (a-get* el 'isArchived))))

      ;; filter repos in reposExclude list
      (seq-filter (lambda (el) (not (member (a-get* el 'name) repos-exclude))))
      (mapcar (lambda (el)
                (let* ((raw-name (a-get* el 'name))

                       ;; (repo-core? (member raw-name repos-core))

                       ;; (path-dirs (list "rocm" raw-name))
                       (path-dirs (list raw-name))

                       ;; (path-dirs (cond (repo-core? (list "core" raw-name))
                       ;;                 (t (list "misc" raw-name))))

                       (path (string-join path-dirs "/"))
                       (ref (concat (a-get* el 'defaultBranchRef 'prefix)
                                    (a-get* el 'defaultBranchRef 'name)))
                       (name (string-join (list (a-get* el 'owner 'login)
                                                (a-get* el 'name)) "/")))
                  (concat "<project"
                          " name=\"" name
                          "\" path=\"" path
                          "\" revision=\"" ref "\" remote=\"github\"/>")))))
    (cl-sort 'string-lessp :key 'downcase)
    (string-join "\n")))
#+end_src

#+RESULTS: rocmReposXML
#+begin_export html
<project name="ROCm/aiter" path="aiter" revision="refs/heads/main" remote="github"/>
<project name="ROCm/amd-anp" path="amd-anp" revision="refs/heads/main" remote="github"/>
<project name="ROCm/amd-rocm-programming-guide" path="amd-rocm-programming-guide" revision="refs/heads/main" remote="github"/>
<project name="ROCm/amd_matrix_instruction_calculator" path="amd_matrix_instruction_calculator" revision="refs/heads/main" remote="github"/>
<project name="ROCm/amdgpu" path="amdgpu" revision="refs/heads/master" remote="github"/>
<project name="ROCm/AMDMIGraphX" path="AMDMIGraphX" revision="refs/heads/develop" remote="github"/>
<project name="ROCm/amdsmi" path="amdsmi" revision="refs/heads/amd-mainline" remote="github"/>
<project name="ROCm/aomp" path="aomp" revision="refs/heads/aomp-dev" remote="github"/>
<project name="ROCm/aotriton" path="aotriton" revision="refs/heads/main" remote="github"/>
<project name="ROCm/ATOM" path="ATOM" revision="refs/heads/main" remote="github"/>
<project name="ROCm/clr" path="clr" revision="refs/heads/develop" remote="github"/>
<project name="ROCm/composable_kernel" path="composable_kernel" revision="refs/heads/develop" remote="github"/>
<project name="ROCm/container-toolkit" path="container-toolkit" revision="refs/heads/main" remote="github"/>
<project name="ROCm/cupy" path="cupy" revision="refs/heads/master" remote="github"/>
<project name="ROCm/cvs" path="cvs" revision="refs/heads/main" remote="github"/>
<project name="ROCm/DeepEP" path="DeepEP" revision="refs/heads/main" remote="github"/>
<project name="ROCm/DeepSpeed" path="DeepSpeed" revision="refs/heads/master" remote="github"/>
<project name="ROCm/device-metrics-exporter" path="device-metrics-exporter" revision="refs/heads/main" remote="github"/>
<project name="ROCm/flash-attention" path="flash-attention" revision="refs/heads/tridao" remote="github"/>
<project name="ROCm/flashinfer" path="flashinfer" revision="refs/heads/amd-integration" remote="github"/>
<project name="ROCm/gpu-cluster-networking" path="gpu-cluster-networking" revision="refs/heads/develop" remote="github"/>
<project name="ROCm/gpu-operator" path="gpu-operator" revision="refs/heads/main" remote="github"/>
<project name="ROCm/gpuaidev" path="gpuaidev" revision="refs/heads/main" remote="github"/>
<project name="ROCm/hcc" path="hcc" revision="refs/heads/clang_tot_upgrade" remote="github"/>
<project name="ROCm/hip" path="hip" revision="refs/heads/develop" remote="github"/>
<project name="ROCm/hip-python" path="hip-python" revision="refs/heads/release/rocm-rel-7.1.0" remote="github"/>
<project name="ROCm/hip-tests" path="hip-tests" revision="refs/heads/develop" remote="github"/>
<project name="ROCm/hipBLASLt" path="hipBLASLt" revision="refs/heads/develop_deprecated" remote="github"/>
<project name="ROCm/hipCUB" path="hipCUB" revision="refs/heads/develop_deprecated" remote="github"/>
<project name="ROCm/hipFFT" path="hipFFT" revision="refs/heads/develop_deprecated" remote="github"/>
<project name="ROCm/hipFile" path="hipFile" revision="refs/heads/develop" remote="github"/>
<project name="ROCm/hipfort" path="hipfort" revision="refs/heads/develop" remote="github"/>
<project name="ROCm/HIPIFY" path="HIPIFY" revision="refs/heads/amd-develop" remote="github"/>
<project name="ROCm/hipify_torch" path="hipify_torch" revision="refs/heads/master" remote="github"/>
<project name="ROCm/InferenceMAX" path="InferenceMAX" revision="refs/heads/main" remote="github"/>
<project name="ROCm/iris" path="iris" revision="refs/heads/main" remote="github"/>
<project name="ROCm/k8s-device-plugin" path="k8s-device-plugin" revision="refs/heads/master" remote="github"/>
<project name="ROCm/librocdxg" path="librocdxg" revision="refs/heads/develop" remote="github"/>
<project name="ROCm/llama.cpp" path="llama.cpp" revision="refs/heads/amd-integration" remote="github"/>
<project name="ROCm/llvm-project" path="llvm-project" revision="refs/heads/amd-staging" remote="github"/>
<project name="ROCm/MAD" path="MAD" revision="refs/heads/develop" remote="github"/>
<project name="ROCm/madengine" path="madengine" revision="refs/heads/main" remote="github"/>
<project name="ROCm/maxtext" path="maxtext" revision="refs/heads/main" remote="github"/>
<project name="ROCm/Megatron-LM" path="Megatron-LM" revision="refs/heads/rocm_dev" remote="github"/>
<project name="ROCm/MIOpen" path="MIOpen" revision="refs/heads/develop_deprecated" remote="github"/>
<project name="ROCm/MIVisionX" path="MIVisionX" revision="refs/heads/develop" remote="github"/>
<project name="ROCm/mori" path="mori" revision="refs/heads/main" remote="github"/>
<project name="ROCm/numba-hip" path="numba-hip" revision="refs/heads/dev" remote="github"/>
<project name="ROCm/omnitrace" path="omnitrace" revision="refs/heads/amd-staging" remote="github"/>
<project name="ROCm/onnxruntime" path="onnxruntime" revision="refs/heads/main" remote="github"/>
<project name="ROCm/rccl" path="rccl" revision="refs/heads/develop" remote="github"/>
<project name="ROCm/rccl-tests" path="rccl-tests" revision="refs/heads/develop" remote="github"/>
<project name="ROCm/roc-optiq" path="roc-optiq" revision="refs/heads/main" remote="github"/>
<project name="ROCm/ROC-smi" path="ROC-smi" revision="refs/heads/master" remote="github"/>
<project name="ROCm/rocAL" path="rocAL" revision="refs/heads/develop" remote="github"/>
<project name="ROCm/rocALUTION" path="rocALUTION" revision="refs/heads/develop" remote="github"/>
<project name="ROCm/rocBLAS" path="rocBLAS" revision="refs/heads/develop_deprecated" remote="github"/>
<project name="ROCm/rocCV" path="rocCV" revision="refs/heads/develop" remote="github"/>
<project name="ROCm/ROCdbgapi" path="ROCdbgapi" revision="refs/heads/amd-staging" remote="github"/>
<project name="ROCm/rocDecode" path="rocDecode" revision="refs/heads/develop" remote="github"/>
<project name="ROCm/ROCgdb" path="ROCgdb" revision="refs/heads/amd-staging" remote="github"/>
<project name="ROCm/rocHPCG" path="rocHPCG" revision="refs/heads/develop" remote="github"/>
<project name="ROCm/ROCm" path="ROCm" revision="refs/heads/develop" remote="github"/>
<project name="ROCm/rocm-blogs" path="rocm-blogs" revision="refs/heads/release" remote="github"/>
<project name="ROCm/rocm-cmake" path="rocm-cmake" revision="refs/heads/develop" remote="github"/>
<project name="ROCm/ROCm-docker" path="ROCm-docker" revision="refs/heads/master" remote="github"/>
<project name="ROCm/rocm-docs-core" path="rocm-docs-core" revision="refs/heads/develop" remote="github"/>
<project name="ROCm/rocm-examples" path="rocm-examples" revision="refs/heads/amd-staging" remote="github"/>
<project name="ROCm/rocm-install-on-linux" path="rocm-install-on-linux" revision="refs/heads/develop" remote="github"/>
<project name="ROCm/rocm-jax" path="rocm-jax" revision="refs/heads/master" remote="github"/>
<project name="ROCm/rocm-kpack" path="rocm-kpack" revision="refs/heads/main" remote="github"/>
<project name="ROCm/rocm-libraries" path="rocm-libraries" revision="refs/heads/develop" remote="github"/>
<project name="ROCm/rocm-rag" path="rocm-rag" revision="refs/heads/main" remote="github"/>
<project name="ROCm/rocm-systems" path="rocm-systems" revision="refs/heads/develop" remote="github"/>
<project name="ROCm/rocm_bandwidth_test" path="rocm_bandwidth_test" revision="refs/heads/amd-mainline" remote="github"/>
<project name="ROCm/rocMLIR" path="rocMLIR" revision="refs/heads/develop" remote="github"/>
<project name="ROCm/rocmProfileData" path="rocmProfileData" revision="refs/heads/master" remote="github"/>
<project name="ROCm/ROCmValidationSuite" path="ROCmValidationSuite" revision="refs/heads/master" remote="github"/>
<project name="ROCm/rocPRIM" path="rocPRIM" revision="refs/heads/develop_deprecated" remote="github"/>
<project name="ROCm/rocprof-compute-viewer" path="rocprof-compute-viewer" revision="refs/heads/amd-mainline" remote="github"/>
<project name="ROCm/rocprof-trace-decoder" path="rocprof-trace-decoder" revision="refs/heads/amd-mainline" remote="github"/>
<project name="ROCm/rocprofiler-systems" path="rocprofiler-systems" revision="refs/heads/develop_deprecated" remote="github"/>
<project name="ROCm/rocPyDecode" path="rocPyDecode" revision="refs/heads/develop" remote="github"/>
<project name="ROCm/rocr_debug_agent" path="rocr_debug_agent" revision="refs/heads/amd-staging" remote="github"/>
<project name="ROCm/rocSHMEM" path="rocSHMEM" revision="refs/heads/develop" remote="github"/>
<project name="ROCm/rocSPARSE" path="rocSPARSE" revision="refs/heads/develop_deprecated" remote="github"/>
<project name="ROCm/rpp" path="rpp" revision="refs/heads/develop" remote="github"/>
<project name="ROCm/SPIRV-LLVM-Translator" path="SPIRV-LLVM-Translator" revision="refs/heads/amd-develop" remote="github"/>
<project name="ROCm/system-acceptance-docs" path="system-acceptance-docs" revision="refs/heads/main" remote="github"/>
<project name="ROCm/Tensile" path="Tensile" revision="refs/heads/develop_deprecated" remote="github"/>
<project name="ROCm/tensorflow-upstream" path="tensorflow-upstream" revision="refs/heads/develop-upstream" remote="github"/>
<project name="ROCm/TheRock" path="TheRock" revision="refs/heads/main" remote="github"/>
<project name="ROCm/timemory" path="timemory" revision="refs/heads/timem" remote="github"/>
<project name="ROCm/torch_migraphx" path="torch_migraphx" revision="refs/heads/master" remote="github"/>
<project name="ROCm/TransferBench" path="TransferBench" revision="refs/heads/develop" remote="github"/>
<project name="ROCm/TransformerEngine" path="TransformerEngine" revision="refs/heads/dev" remote="github"/>
<project name="ROCm/triton" path="triton" revision="refs/heads/main_perf" remote="github"/>
<project name="ROCm/tritonBLAS" path="tritonBLAS" revision="refs/heads/main" remote="github"/>
<project name="ROCm/vllm" path="vllm" revision="refs/heads/main" remote="github"/>
#+end_export

Generate =rocm.xml=

#+begin_src xml :tangle rocm.xml :noweb yes
<manifest>
  <<rocmReposXML()>>
</manifest>
#+end_src
